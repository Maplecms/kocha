// AUTO-GENERATED BY kocha build
// DO NOT EDIT THIS FILE
package main

import (
	"github.com/naoina/kocha"
	config "{{.configImportPath}}"
	"os"
	"text/template"
)

const (
	mainTemplate = `{{.mainTemplate}}`
)

func main() {
	funcMap := template.FuncMap{
		"goString": kocha.GoString,
	}
	t := template.Must(template.New("main").Funcs(funcMap).Parse(mainTemplate))
	file, err := os.Create("{{.mainFilePath}}")
	if err != nil {
		panic(err)
	}
	defer file.Close()
	appConfig := config.AppConfig
	data := map[string]interface{}{
		"appConfig":             appConfig,
		"addr":                  config.Addr,
		"port":                  config.Port,
		"config":                kocha.Config(appConfig.AppName),
		"controllersImportPath": "{{.controllersImportPath}}",
	}
	if err := t.Execute(file, data); err != nil {
		panic(err)
	}
}
